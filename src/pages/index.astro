---
// src/pages/index.astro - Leaf by Leaf Plants Blog with Register
import Layout from '../layouts/Layout.astro';
---

<Layout title="Leaf by Leaf - Plants Blog">
  <!-- Full-width background hero -->
  <div class="relative min-h-screen bg-cover bg-center bg-no-repeat bg-fixed" 
       style="background-image: url('https://images.unsplash.com/photo-1588920882076-766ac6e260cd?ixlib=rb-4.0.3&auto=format&fit=crop&w=3840&q=80');">
    
    {/* Full overlay */}
    <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-black/60 to-black/90 z-10"></div>
    
    <!-- Nav bar top -->
    <nav class="relative z-30 bg-black/30 backdrop-blur-md border-b border-white/20">
      <div class="max-w-6xl mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <h1 class="text-3xl font-bold bg-gradient-to-r from-emerald-400 to-teal-400 bg-clip-text text-transparent">
            Leaf by Leaf
          </h1>
          <div class="flex gap-2">
            <a href="/posts" class="text-white/80 hover:text-white px-4 py-2 rounded-lg transition-colors">Articles</a>
            <a href="/about" class="text-white/80 hover:text-white px-4 py-2 rounded-lg transition-colors">About</a>
            <button id="login-btn" class="bg-emerald-500/80 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300">
              Sign In
            </button>
          </div>
        </div>
      </div>
    </nav>
    
    <!-- Hero content centered -->
    <div class="relative z-20 flex min-h-[calc(100vh-80px)] items-center justify-center text-center text-white px-4">
      <div class="max-w-4xl mx-auto space-y-8">
        <h1 class="text-5xl md:text-7xl lg:text-8xl font-black bg-gradient-to-r from-emerald-400 via-green-400 to-teal-500 bg-clip-text text-transparent drop-shadow-2xl leading-tight">
          Plants Blog
        </h1>
        <p class="text-xl md:text-2xl lg:text-3xl text-white/90 max-w-3xl mx-auto leading-relaxed drop-shadow-lg font-light">
          Discover the fascinating world of plants. Guides, care tips, and expert advice for your urban jungle.
        </p>
        
        <!-- NEW REGISTER BUTTON -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center pt-8">
          <button id="register-btn" class="bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-12 py-4 rounded-2xl text-xl font-semibold border-2 border-white/30 hover:border-white/50 shadow-xl hover:shadow-white/20 transform hover:-translate-y-1 transition-all duration-300">
            ‚ú® Register Now
          </button>
        </div>
      </div>
    </div>
    
    <!-- Login status */}
    <div id="user-info" class="relative z-20 mt-8 max-w-6xl mx-auto px-6 pb-8 hidden">
      <div class="bg-white/10 backdrop-blur-md p-6 rounded-2xl border border-white/20 max-w-md mx-auto">
        <div class="flex items-center justify-between">
          <span id="user-email" class="font-semibold text-white"></span>
          <button id="logout-btn" class="text-sm text-emerald-300 hover:text-white underline transition-colors">Sign Out</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Magic Link Supabase -->
  <script is:inline>
    // REPLACE WITH YOUR REAL SUPABASE VALUES
    const SUPABASE_URL = 'https://your-project.supabase.co';
    const ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
    
    // Sign In
    document.getElementById('login-btn').onclick = function() {
      const email = prompt('üåø Enter your email for Magic Link:');
      if (email && email.includes('@')) {
        fetch(SUPABASE_URL + '/auth/v1/verify', {
          method: 'POST',
          headers: { 'apikey': ANON_KEY, 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: email, type: 'magiclink' })
        }).then(r => r.ok ? alert('‚úÖ Magic link sent to ' + email) : alert('‚ùå Error'))
          .catch(() => alert('‚ùå Network error'));
      }
    };
    
    // NEW Register (same as Sign In for now)
    document.getElementById('register-btn').onclick = function() {
      const email = prompt('üå± Create account with email:');
      if (email && email.includes('@')) {
        fetch(SUPABASE_URL + '/auth/v1/verify', {
          method: 'POST',
          headers: { 'apikey': ANON_KEY, 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: email, type: 'magiclink' })
        }).then(r => r.ok ? alert('‚úÖ Welcome! Magic link sent to ' + email) : alert('‚ùå Error'))
          .catch(() => alert('‚ùå Network error'));
      }
    };
    
    // Logout
    document.getElementById('logout-btn').onclick = function() {
      document.getElementById('user-info').classList.add('hidden');
      document.getElementById('login-btn').style.display = 'block';
    };
  </script>
</Layout>
